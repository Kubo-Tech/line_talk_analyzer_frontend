# 画面設計

本ドキュメントでは、LINE流行語大賞2025アプリケーションの各画面設計について詳細に記述します。各画面の構成要素、機能、ユーザーインターフェースの仕様を明確にすることで、開発者が一貫したユーザー体験を提供できるようにします。

## 画面一覧

| 画面名               | パス       | 説明                                   |
| -------------------- | ---------- | -------------------------------------- |
| トップページ         | `/`        | ファイルアップロード画面               |
| 結果表示ページ       | `/result`  | 解析結果の表示                         |
| ヘルプページ         | `/help`    | トーク履歴の取得方法（画像付き手順）   |

# トップページ（`/`）

### 構成要素

```
┌─────────────────────────────┐
│         Header              │
│ 📊 LINE流行語大賞 2025  🌙  │  ← ダークモード切り替え
├─────────────────────────────┤
|     LINE流行語大賞 2025      |
│                             │
│    📁 ファイルアップロード   │
│    ┌─────────────────────┐  │
│    │                     │  │
│    │  ここにファイルを    │  │
│    │  ドロップ または     │  │
│    │  タップして選択      │  │
│    │                     │  │
│    └─────────────────────┘  │
│                             │
│    [トーク履歴の取得方法]     │
│                             │
├─────────────────────────────┤
│    ☑ [プライバシーポリシー]  │ ← モーダルで表示
│      に同意する              │
├─────────────────────────────┤
│      [⚙️ 設定変更]          │  ← 設定モーダルを開く
│    [  解析を開始する  ]      │
│                             │
├─────────────────────────────┤
│         Footer              │
└─────────────────────────────┘
```

### 機能詳細

1. **Header**
   - タイトル：クリックでトップページに戻る（ファイルクリア）
   - ダークモード切り替えボタン：ライト/ダークテーマの切り替え

2. **ファイルアップロード**
   - ドラッグ&ドロップ対応
   - タップでファイル選択ダイアログを開く
   - `.txt`ファイルのみ受け付け
   - 最大50MBまで対応
   - アップロード後、ファイル名を表示
   - ファイル選択後に削除ボタンでクリア可能
   - ファイル選択後にバックグラウンドでサーバーウォームアップを実行

3. **ヘルプリンク**
   - 「トーク履歴の取得方法」をタップでヘルプページへ遷移
   - iPhone/Android別の画像付き手順を表示

4. **プライバシー同意**
   - チェックボックスで同意を取得
   - 未同意の場合は「解析を開始する」ボタンを無効化
   - 「プライバシーポリシー」リンクをクリックでモーダル表示
   - モーダルを開くとバックグラウンドでサーバーウォームアップを実行

5. **設定変更ボタン**
   - 「⚙️ 設定変更」ボタンをクリックで設定モーダルを開く
   - 解析期間、単語長、メッセージ長、最小出現回数などを設定可能

6. **解析開始ボタン**
   - ファイル選択済み かつ プライバシー同意済みで有効化
   - タップで解析処理を開始
   - 処理中はウォームアップメッセージとローディング表示
   - エラー時はエラーメッセージを表示

## 結果表示ページ（`/result`）

### 構成

```
┌─────────────────────────────┐
│         Header              │
│ 📊 LINE流行語大賞 2025  🌙  │
├─────────────────────────────┤
│  期間: 2024/01/01〜12/31    │
│  総メッセージ数: 15,000      │
│  ユーザー数: 5人             │
├─────────────────────────────┤
│   [⚙️ 設定変更] [再解析]    │  ← 設定変更して再解析
│  [全体] [Aさん] [Bさん]...   │  ← ユーザータブ
├─────────────────────────────┤
│  ▼ 流行語大賞 TOP10         │
│  ┌─────────────────────┐   │
│  │ 1位 おうち    42回   │   │
│  │ 2位 草       38回    │   │
│  │ 3位 ...             │   │
│  └─────────────────────┘   │
│  [もっと見る（100位まで）]   │
├─────────────────────────────┤
│  ▼ 流行メッセージ TOP10      │
│  ┌─────────────────────┐   │
│  │ 1位 おうち帰りたい 15回│  │
│  │ 2位 了解！      12回│    │
│  │ 3位 ...            │    │
│  └─────────────────────┘   │
│  [もっと見る（100位まで）]   │
├────────────────────────────┤
│    [別のファイルを解析]      │
├─────────────────────────────┤
│         Footer              │
└─────────────────────────────┘
```

### 機能詳細

1. **解析サマリー**
   - 解析期間の表示（YYYY/MM/DD形式）
   - 総メッセージ数の表示（カンマ区切り）
   - ユーザー数の表示

2. **ユーザータブ**
   - 「全体」と各発言者のタブを表示
   - タブ切り替えで表示内容を更新
   - 横スクロール対応（発言者が多い場合）
   - アクティブなタブは強調表示

3. **ランキング表示**
   - 順位、ワード/メッセージ、出現回数を表示
   - 初期表示はTOP10
   - 「もっと見る」ボタンで100位まで展開
   - 「閉じる」ボタンでTOP10に戻す
   - アコーディオン形式で開閉

4. **設定変更**
   - 「⚙️ 設定変更」ボタンをクリックで設定モーダルを開く
   - 設定変更後、同じファイルで再解析を実行
   - 設定変更の確認モーダルを表示

5. **アクション**
   - 「別のファイルを解析」でトップページへ遷移（結果をクリア）

## ヘルプページ（`/help`）

### 構成

```
┌─────────────────────────────┐
│         Header              │
│    トーク履歴の取得方法     │
├─────────────────────────────┤
│                             │
│  📱 iPhoneの場合            │
│  ...                        │
│                             │
│  📱 Androidの場合           │
│  ...                        │
│                             │
├─────────────────────────────┤
│  [トップに戻る]              │
├─────────────────────────────┤
│         Footer              │
└─────────────────────────────┘
```

## 共通モーダル

### プライバシーポリシーモーダル

- トップページの「プライバシーポリシー」リンクをクリックで表示
- モーダル内でプライバシーポリシーの全文を表示
- スクロール可能
- 背景クリックまたは×ボタンで閉じる
- モーダルを開くとバックグラウンドでサーバーウォームアップを実行

**内容:**
- 必須同意項目
  - データ処理の説明（ブラウザローカル処理）
  - 一時的なサーバー送信の説明
- データの取り扱い
  - 収集しないデータの明記
  - サーバー保存しないことの明記
- セキュリティ
  - HTTPS通信の説明
  - 処理完了後の自動削除

### 設定変更モーダル

- トップページまたは結果表示ページの「⚙️ 設定変更」ボタンをクリックで表示
- 各種解析パラメータを設定可能
- リセットボタンでデフォルト値に戻す
- キャンセル、または×ボタンで閉じる（変更がある場合は確認ダイアログ表示）

**設定項目:**
1. **解析期間**
   - 開始日（デフォルト: 今年の1月1日）
   - 終了日（デフォルト: 今年の12月31日）

2. **単語フィルター**
   - 最小文字数（デフォルト: 1）
   - 最大文字数（デフォルト: 無制限）
   - 最小出現回数（デフォルト: 2）

3. **メッセージフィルター**
   - 最小文字数（デフォルト: 2）
   - 最大文字数（デフォルト: 無制限）
   - 最小出現回数（デフォルト: 2）

**ボタン:**
- 「デフォルトに戻す」：全ての設定をデフォルト値に戻す
- 「キャンセル」：変更を破棄して閉じる
- 「設定反映」：設定を保存して解析を実行
