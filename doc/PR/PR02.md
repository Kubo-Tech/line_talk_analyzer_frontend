# PR#2: 共通コンポーネント・レイアウト

## 概要

アプリ全体で使用する共通UIコンポーネントの実装

## 実装内容

### コンポーネント

#### 1. Header.tsx

- ✅ ロゴ、タイトル表示
- ✅ レスポンシブ対応
- ✅ ホームへのリンク機能

#### 2. Footer.tsx

- ✅ コピーライト表示
- ✅ プライバシーポリシーへのリンク
- ✅ ヘルプへのリンク
- ✅ GitHubリポジトリへのリンク
- ✅ 免責事項の表示

#### 3. Button.tsx

- ✅ variant（primary, secondary, outline）
- ✅ disabled 状態の対応
- ✅ ローディング状態の表示
- ✅ カスタムクラスの適用
- ✅ アクセシビリティ対応

#### 4. Loading.tsx

- ✅ スピナーアニメーション
- ✅ オーバーレイ表示オプション
- ✅ カスタムメッセージの表示
- ✅ アクセシビリティ対応（role="status", aria-live="polite"）

#### 5. Modal.tsx

- ✅ オープン/クローズ制御
- ✅ オーバーレイクリックで閉じる
- ✅ Escapeキーで閉じる
- ✅ タイトル表示オプション
- ✅ スクロール対応
- ✅ アクセシビリティ対応（role="dialog", aria-modal="true"）

#### 6. layout.tsx

- ✅ Header/Footer の配置
- ✅ メタデータ設定（SEO、OGP、Twitter Card）
- ✅ viewport設定
- ✅ flexboxレイアウトでFooterを下部に固定

#### 7. globals.css

- ✅ Tailwind CSS v4 インポート
- ✅ カスタムカラー変数（primary, primary-dark等）
- ✅ ダークモード対応
- ✅ カスタムアニメーション（fadeIn, slideUp）
- ✅ 日本語フォント設定

## テスト実装

### 単体テスト（全29テスト）

#### Button.test.tsx（7テスト）

- ✅ クリックイベント発火
- ✅ disabled 状態でクリック無効
- ✅ ローディング表示
- ✅ primary variant スタイル
- ✅ secondary variant スタイル
- ✅ outline variant スタイル
- ✅ ローディング中disabled

#### Loading.test.tsx（5テスト）

- ✅ スピナー表示
- ✅ カスタムメッセージ表示
- ✅ overlayモード表示
- ✅ overlay無し表示
- ✅ メッセージなし表示

#### Modal.test.tsx（7テスト）

- ✅ isOpenによる表示制御
- ✅ タイトル表示
- ✅ 閉じるボタンでonClose呼び出し
- ✅ オーバーレイクリックでonClose呼び出し
- ✅ 内部クリックでonClose呼ばれない
- ✅ Escapeキーで閉じる

#### Header.test.tsx（4テスト）

- ✅ 正しくレンダリング
- ✅ タイトル表示
- ✅ ホームリンク
- ✅ アイコン表示

#### Footer.test.tsx（6テスト）

- ✅ 正しくレンダリング
- ✅ プライバシーポリシーリンク
- ✅ ヘルプリンク
- ✅ GitHubリンク（target="\_blank", rel="noopener noreferrer"）
- ✅ コピーライト表示
- ✅ 免責事項表示

### テスト結果

```
Test Suites: 5 passed, 5 total
Tests:       29 passed, 29 total
Snapshots:   0 total
Time:        1.993 s
```

## CI/CD チェック

### ESLint

```
✅ エラーなし
```

### TypeScript型チェック

```
✅ エラーなし
```

### ビルド

```
✓ Compiled successfully in 1364.3ms
✓ Finished TypeScript in 1186.5ms
✓ Collecting page data using 15 workers in 283.9ms
✓ Generating static pages using 15 workers (3/3) in 354.1ms
✓ Finalizing page optimization in 8.8ms
```

## ファイル構成

```
src/
├── app/
│   ├── layout.tsx          # 更新
│   └── globals.css         # 既存（確認済み）
├── components/
│   └── common/
│       ├── Header.tsx      # 新規作成
│       ├── Footer.tsx      # 新規作成
│       ├── Button.tsx      # 新規作成
│       ├── Loading.tsx     # 新規作成
│       └── Modal.tsx       # 新規作成
tests/
└── unit/
    └── components/
        └── common/
            ├── Header.test.tsx   # 新規作成
            ├── Footer.test.tsx   # 新規作成
            ├── Button.test.tsx   # 新規作成
            ├── Loading.test.tsx  # 新規作成
            └── Modal.test.tsx    # 新規作成
```

## 技術的な詳細

### アクセシビリティ対応

- 全てのインタラクティブ要素にARIA属性を適切に設定
- キーボード操作に対応（Modal: Escape、Button: Enterなど）
- スクリーンリーダー対応（role, aria-label等）

### レスポンシブ対応

- Tailwind CSSのユーティリティクラスを使用
- モバイルファーストのアプローチ
- dark modeへの対応

### パフォーマンス

- Client Componentは必要最小限（Modalのみ）
- Server Componentをデフォルトで使用
- アニメーションはCSSで実装（Framer Motionは後のPRで導入予定）

## 依存関係

- PR#1（プロジェクト初期設定）完了済み

## 次のステップ

- PR#3: 型定義・APIクライアント
- PR#4: プライバシーポリシーページ
- PR#5: ファイルアップロード機能（PR#2完了後）

## 備考

- globals.cssは既に適切に実装されていたため、変更なし
- 全てのコンポーネントにTypeScript型定義を実装
- テストカバレッジは100%（実装した全コンポーネント）
- ビルド成功、エラーなし
